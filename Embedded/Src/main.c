//-----------------------------------------------------------------------------
// Project: Switcher
// File: 	Pid.h	
// Brief:	Header file for PID controller 
//-----------------------------------------------------------------------------

//-----------------------------------------------------------------------------
// Defines
//-----------------------------------------------------------------------------
#define SYSCLK      	24500000   				// SYSCLK frequency in Hz
#ifdef DEBUG
	#define BAUDRATE   	115200    				// Baud rate of UART in bps
#endif

//-----------------------------------------------------------------------------
// Includes
//-----------------------------------------------------------------------------
#include "SI_C8051F850_Register_Enums.h"
#include "SI_C8051F850_Defs.h"
#include "InitDevice.h"
#include "Pid.h"
#include "Uart.h"
#include "Adc.h"

//-----------------------------------------------------------------------------
// Global Variables
//-----------------------------------------------------------------------------
U8 	pwm_0;       								// Holds current PCA compare value
U8 	pwm_1;       								// Holds current PCA compare value

//-----------------------------------------------------------------------------
// MAIN Routine
//-----------------------------------------------------------------------------

void main (void){
	pwm_0 = 0;
	pwm_1 = 0;
	initDevice();
	pidInit();
	while (1){
		pwm_0 = readAdc() >> 2;
		pwm_1 = 255 - pwm_0;
		uartSendNum(pwm_0);
		uartSend(' ');
		uartSendNum(pwm_1);
		uartSend('\r');
		uartSend('\n');
	}
}
//-----------------------------------------------------------------------------
// End Of File
//-----------------------------------------------------------------------------
