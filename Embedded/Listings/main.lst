C51 COMPILER V9.56.0.0   MAIN                                                              11/28/2016 21:11:59 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Inc) DEBUG OBJECTEXTEND PRINT(.
                    -\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          //-----------------------------------------------------------------------------
   2          // F85x_Ports_SwitchLED.c
   3          //-----------------------------------------------------------------------------
   4          // Copyright 2014 Silicon Laboratories, Inc.
   5          // http://developer.silabs.com/legal/version/v11/Silicon_Labs_Software_License_Agreement.txt
   6          //
   7          // Program Description:
   8          //
   9          // This program demonstrates how to configure port pins as digital inputs
  10          // and outputs.  The C8051F85x MCU card has two push-button switches
  11          // and two LEDs connected to port pins.  The program constantly checks the
  12          // status of the switches and if S1 is closed, it turns off LED1; otherwise,
  13          // LED1 is on.  S2 controls LED2 in the same manner.
  14          //
  15          //
  16          //-----------------------------------------------------------------------------
  17          // How To Test: UPMU-F850
  18          //-----------------------------------------------------------------------------
  19          // 1) Ensure shorting blocks are place on the following:
  20          //    - J27: DS5 P1.0 - P1.0
  21          //    - J27: DS6 P1.1 - P1.1/ADC0.9
  22          //    - J27: S1 - P1.7
  23          //    - J27: S2 - P2.1
  24          //    - JP2
  25          // 2) Place the SW1 switch in the +3.3V_VREG position and power the board
  26          //    using the J6 power connector.
  27          // 3) Compile and download code to the 'F85x UDP MCU board by selecting
  28          //              Run -> Debug from the menus, clicking the Debug button in the quick menu,
  29          //              or pressing F11.
  30          // 4) Run the code by selecting Run -> Resume from the menus, clicking the
  31          //              Resume button in the quick menu, or pressing F8.
  32          // 5) Push the buttons (S1 or S2) and see that the corresponding LED (DS5 or
  33          //    DS6) turns off.
  34          //
  35          //-----------------------------------------------------------------------------
  36          // How To Test: ToolStick F85x
  37          //-----------------------------------------------------------------------------
  38          // 1) Ensure shorting blocks are place on the following:
  39          //    - JP1
  40          // 2) Connect the ToolStick F85x board to a PC using a Silicon Labs ToolStick
  41          //    Base Adapter.
  42          // 3) Compile and download code to the ToolStick F85x board by selecting
  43          //    Run -> Debug from the menus, clicking the Debug button in the quick menu,
  44          //    or pressing F11.
  45          // 4) Run the code by selecting Run -> Resume from the menus, clicking the
  46          //    Resume button in the quick menu, or pressing F8.
  47          // 5) Push the buttons (S1 or S2) and see that the corresponding LED (DS5 or
  48          //    DS6) turns off.
  49          //
  50          //
  51          // Target:         C8051F85x/86x
  52          // Tool chain:     Generic
  53          // Command Line:   None
  54          //
C51 COMPILER V9.56.0.0   MAIN                                                              11/28/2016 21:11:59 PAGE 2   

  55          //
  56          // Release 1.2 (BL)
  57          //              - Updated How To Test
  58          //              - 2 JAN 2014
  59          //
  60          // Release 1.1 (TP)
  61          //    - Updated descriptions and comments
  62          //    - 24 JUL 2013
  63          //
  64          // Release 1.0
  65          //    - Initial Revision (TP)
  66          //    - 19 FEB 2013
  67          //
  68          
  69          //-----------------------------------------------------------------------------
  70          // Includes
  71          //-----------------------------------------------------------------------------
  72          
  73          #include <SI_C8051F850_Register_Enums.h>
  74          #include "InitDevice.h"
  75          
  76          //-----------------------------------------------------------------------------
  77          // Pin Declarations
  78          //-----------------------------------------------------------------------------
  79          
  80          SBIT(LED1, SFR_P1, 0);                 // DS5 P1.0 LED
  81          SBIT(LED2, SFR_P1, 1);                 // DS6 P1.1 LED
  82          SBIT(S1, SFR_P1, 7);
  83          SBIT(S2, SFR_P2, 1);
  84          
  85          //-----------------------------------------------------------------------------
  86          // Global Constants
  87          //-----------------------------------------------------------------------------
  88          
  89          #define SYSCLK      24500000/8         // Clock speed in Hz (default)
  90          
  91          #define SW_PRESSED           0
  92          #define SW_NOT_PRESSED       1
  93          
  94          #define LED_ON               0
  95          #define LED_OFF              1
  96          
  97          //-----------------------------------------------------------------------------
  98          // Function Prototypes
  99          //-----------------------------------------------------------------------------
 100          
 101          //-----------------------------------------------------------------------------
 102          // main() Routine
 103          //-----------------------------------------------------------------------------
 104          
 105          void main (void)
 106          {
 107   1              enter_DefaultMode_from_RESET();
 108   1      
 109   1         while (1)
 110   1         {
 111   2            // Set the state of LED1
 112   2            if (S1 == SW_PRESSED)
 113   2            {
 114   3               LED1 = LED_OFF;
 115   3            }
 116   2            else
C51 COMPILER V9.56.0.0   MAIN                                                              11/28/2016 21:11:59 PAGE 3   

 117   2            {
 118   3               LED1 = LED_ON;
 119   3            }
 120   2      
 121   2            // Set the state of LED2
 122   2            if (S2 == SW_PRESSED)
 123   2            {
 124   3               LED2 = LED_OFF;
 125   3            }
 126   2            else
 127   2            {
 128   3               LED2 = LED_ON;
 129   3            }
 130   2         }
 131   1      }
 132          
 133          //-----------------------------------------------------------------------------
 134          // Initialization Subroutines
 135          //-----------------------------------------------------------------------------
 136          
 137          //-----------------------------------------------------------------------------
 138          // End Of File
 139          //-----------------------------------------------------------------------------


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     23    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
