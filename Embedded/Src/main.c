//-----------------------------------------------------------------------------
// Project: Switcher
// File: 	Pid.h	
// Brief:	Header file for PID controller 
//-----------------------------------------------------------------------------

//-----------------------------------------------------------------------------
// Includes
//-----------------------------------------------------------------------------

#include <SI_C8051F850_Register_Enums.h>
#include <stdio.h>
#include "InitDevice.h"
#include "Pid.h"

//-----------------------------------------------------------------------------
// Global CONSTANTS
//-----------------------------------------------------------------------------

#define SYSCLK      24500000           // SYSCLK frequency in Hz
#define BAUDRATE      115200           // Baud rate of UART in bps

//-----------------------------------------------------------------------------
// Function PROTOTYPES
//-----------------------------------------------------------------------------

//-----------------------------------------------------------------------------
// MAIN Routine
//-----------------------------------------------------------------------------

void main (void){
	uint16_t	pwm;
	SCON0_TI = 1;                       	//This STDIO library requres TI to be set for prints to occur
	enter_DefaultMode_from_RESET();
	pidInit();
	while (1){
		printf("P1.2 voltage: %d mV\n",ADC0);
		pwm = pidUpdate(pwm);
	}
}
//-----------------------------------------------------------------------------
// End Of File
//-----------------------------------------------------------------------------
